apiVersion: apps/v1
kind: Deployment
metadata: 
  name: kul
  annotations: 
    repo: https://github.com/kul-infosys/kubernetes-advanced.git
    maintainer: Kulbhushan Mayer
  labels: 
    day: "3"
    client: Infy
    name: httpd
    type: deployment
  namespace: kul
spec: 
  template:
    metadata:
      labels:  
        day: "3"
        client: Infy
        name: httpd
    spec: 
      tolerations:
        - key: "taint"
          operator: "Equal"
          value: "true"
          effect: "NoSchedule"
      containers:
        - name: httpd
          image: thinknyx/vote:1.0
      nodeSelector:
        env: perf
  selector:
    matchLabels:  
      day: "3"
      client: Infy
      name: httpd
  replicas: 4
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 2
---
apiVersion: v1
kind: Service
metadata: 
  name: kul
spec: 
  type: NodePort #Other Options #LoadBalancer #ClusterIP
  ports:
    - protocol: TCP
      port: 80
      nodePort: 31000 # Should be in range of 30000-32767
      name: access-apache
    - protocol: TCP
      port: 8080
      nodePort: 31001
      name: dummy-ort
  selector: 
    day: "3"
    client: Infy
    name: httpd
    